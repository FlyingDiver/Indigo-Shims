<?xml version="1.0"?>
<Devices>
	<SupportURL>http://forums.indigodomo.com/viewforum.php?f=316</SupportURL>
    <Device id="shimRelay" type="relay">
        <Name>MQTT Switch Device</Name>
        <ConfigUI>
			<Field id="SupportsOnState" type="checkbox" defaultValue="true" hidden="true" />
			<Field id="SupportsSensorValue" type="checkbox" defaultValue="false" hidden="true" />
            <Field id="states_list" type="list" hidden="true"><List class="self" method="getStateList"/></Field>

            <Field id="brokerID" type="menu">
                <Label>MQTT Broker:</Label>
                <List class="self" filter="" method="getBrokerDevices" dynamicReload="true"/>
            </Field>

            <Field id="message_type" type="textfield">
                <Label>Message Type:</Label>
            </Field>
            <Field id="message_type_note" type="label" fontSize="small" fontColor="darkgray" >
                <Label>Must match the Message Type field in the MQTT Plugin's Action.</Label>
            </Field>

            <Field id="uid_location" type="menu" defaultValue="topic">
        		<Label>Unique ID Location:</Label>
        		<List>  
        			<Option value="topic">Topic Component</Option>
        			<Option value="payload">Payload Field</Option>
        		</List>
        	</Field>

            <Field id="uid_location_topic_field" type="textfield" defaultValue="0"  visibleBindingId="uid_location" visibleBindingValue="topic">
                <Label>Topic Field:</Label>
            </Field>
            <Field id="uid_location_topic_field_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="uid_location" visibleBindingValue="topic">
                <Label>Enter array index for unique ID component in topic.  0 is first component.</Label>
            </Field>
            
            <Field id="uid_location_payload_key" type="textfield" defaultValue=""  visibleBindingId="uid_location" visibleBindingValue="payload">
                <Label>Payload Key:</Label>
            </Field>
            <Field id="uid_location_payload_key_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="uid_location" visibleBindingValue="payload" alwaysUseInDialogHeightCalc="true">
                <Label>Enter key for dict entry for unique ID field.  If nested entry, enter each key with '.' between.  For example, "states.did" if the "did" key is inside the "states" dict.</Label>
            </Field>
                        
            <Field id="address" type="textfield"  defaultValue="">
                <Label>Unique ID Value:</Label>
            </Field>
            <Field id="address_note" type="label" fontSize="small" fontColor="darkgray" >
                <Label>Unique ID value for the MQTT device.</Label>
            </Field>

            <Field id="devices_separator1" type="separator"/>

            <Field id="state_location" type="menu" defaultValue="payload">
        		<Label>State Value Location:</Label>
        		<List>
        			<Option value="topic">Topic Component</Option>
        			<Option value="payload">Payload Fields</Option>
        		</List>
        	</Field>
            <Field id="state_location_topic_field" type="textfield" defaultValue="0"  visibleBindingId="state_location" visibleBindingValue="topic">
                <Label>Topic Field:</Label>
            </Field>
            <Field id="state_location_topic_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="state_location" visibleBindingValue="topic">
                <Label>Enter array index for state component in topic.  0 is first component.</Label>
            </Field>
            <Field id="state_location_payload_type" type="menu" defaultValue="json" visibleBindingId="state_location" visibleBindingValue="payload">
        		<Label>Payload Type:</Label>
        		<List>
        			<Option value="json">JSON</Option>
        			<Option value="raw">Raw</Option>
        		</List>
        	</Field>
        	
            <Field id="state_location_payload_key" type="textfield" defaultValue=""  visibleBindingId="state_location_payload_type" visibleBindingValue="json">
                <Label>Payload Key:</Label>
            </Field>
            <Field id="state_location_payload_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="state_location_payload_type" visibleBindingValue="json" alwaysUseInDialogHeightCalc="true">
                <Label>Enter key for dict entry for state field.  If nested entry, enter each key with '.' between.  For example, "states.value" if the "value" key is inside the "states" dict.</Label>
            </Field>

            <Field id="state_on_value" type="textfield" defaultValue="" alwaysUseInDialogHeightCalc="true">
                <Label>On Value:</Label>
            </Field>
            <Field id="state_on_value_note" type="label" fontSize="small" fontColor="darkgray" alwaysUseInDialogHeightCalc="true">
                <Label>String to match for sensor to be "on".</Label>
            </Field>

    		<Field id="shimSensorSubtype" type="menu" defaultValue="Power">
				<Label>Sensor Type:</Label>
                <List>
                    <Option value="Generic">Generic</Option>
                    <Option value="Power">Power On/Off</Option>
                    <Option value="Light">Light On/Off</Option>
                    <Option value="MotionSensor">Motion Sensor</Option>
                </List>
			</Field>

            <Field id="devices_separator2" type="separator"/>

            <Field id="action_template" type="textfield" defaultValue="">
                <Label>Action Topic:
                </Label>
            </Field>
            <Field id="on_action_payload" type="textfield" defaultValue="on">
                <Label>On Action Payload:
                </Label>
            </Field>
            <Field id="off_action_payload" type="textfield" defaultValue="off">
                <Label>Off Action Payload:
                </Label>
            </Field>
            <Field id="toggle_action_payload" type="textfield" defaultValue="toggle">
                <Label>Toggle Action Payload:
                </Label>
            </Field>

            <Field id="SupportsStatusRequest" type="checkbox" defaultValue="false">
                <Label>Device supports status requests:</Label>
            </Field>        	
            <Field id="status_action_template" type="textfield" defaultValue=""  visibleBindingId="SupportsStatusRequest" visibleBindingValue="true">
                <Label>Status Request Topic:</Label>
            </Field>
            <Field id="status_action_payload" type="textfield" defaultValue=""  visibleBindingId="SupportsStatusRequest" visibleBindingValue="true">
                <Label>Status Request Payload:</Label>
            </Field>
            <Field id="devices_separator3" type="separator"/>
            <Field id="state_dict_payload_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="state_location_payload_type" visibleBindingValue="json">
                <Label>If the payload has a dict with multiple entries that should all be states of the device, enter the key(s) for that dict.  If top level, enter '.'.  If nested entry, enter each key with '.' between.</Label>
            </Field>
            <Field id="state_dict_payload_key" type="textfield" defaultValue=""  visibleBindingId="state_location_payload_type" visibleBindingValue="json">
                <Label>Multi-States Key:</Label>
            </Field>

            <Field id="devices_separator4" type="separator"/>
            <Field id="SupportsBatteryLevel" type="checkbox" defaultValue="false">
                <Label>Device reports battery status:</Label>
            </Field>        	
            <Field id="battery_payload_key" type="textfield" defaultValue=""  visibleBindingId="SupportsBatteryLevel" visibleBindingValue="true">
                <Label>Battery Payload Key:</Label>
            </Field>
            <Field id="SupportsEnergyMeter" type="checkbox" defaultValue="false">
                <Label>Device reports energy usage:</Label>
            </Field>
            <Field id="energy_payload_key" type="textfield" defaultValue=""  visibleBindingId="SupportsEnergyMeter" visibleBindingValue="true">
                <Label>Energy Payload Key:</Label>
            </Field>
            <Field id="SupportsEnergyMeterCurPower" type="checkbox" defaultValue="false">
                <Label>Device reports power load:</Label>
            </Field>
            <Field id="power_payload_key" type="textfield" defaultValue=""  visibleBindingId="SupportsEnergyMeterCurPower" visibleBindingValue="true">
                <Label>Power Payload Key:</Label>
            </Field>
            <Field id="extras_payload_key_note" type="label" fontSize="small" fontColor="darkgray" alwaysUseInDialogHeightCalc="true">
                <Label>Payload Keys - If nested entry, enter each key with '.' between.  For example, "states.value" if the "value" key is inside the "states" dict.</Label>
            </Field>
       </ConfigUI>
    </Device>

    <Device id="shimDimmer" type="dimmer">
        <Name>MQTT Dimmer Device</Name>
        <ConfigUI>
            <SupportURL>http://forums.indigodomo.com/viewforum.php?f=214</SupportURL>
			<Field id="SupportsOnState" type="checkbox" defaultValue="false" hidden="true" />
			<Field id="SupportsSensorValue" type="checkbox" defaultValue="true" hidden="true" />
            <Field id="states_list" type="list" hidden="true"><List class="self" method="getStateList"/></Field>

            <Field id="brokerID" type="menu">
                <Label>MQTT Broker:</Label>
                <List class="self" filter="" method="getBrokerDevices" dynamicReload="true"/>
            </Field>

            <Field id="message_type" type="textfield">
                <Label>Message Type:</Label>
            </Field>
            <Field id="message_type_note" type="label" fontSize="small" fontColor="darkgray" >
                <Label>Must match the Message Type field in the MQTT Plugin's Action.</Label>
            </Field>

            <Field id="uid_location" type="menu" defaultValue="topic">
        		<Label>Unique ID Location:</Label>
        		<List>  
        			<Option value="topic">Topic Component</Option>
        			<Option value="payload">Payload Field</Option>
        		</List>
        	</Field>

            <Field id="uid_location_topic_field" type="textfield" defaultValue="0"  visibleBindingId="uid_location" visibleBindingValue="topic">
                <Label>Topic Field:</Label>
            </Field>
            <Field id="uid_location_topic_field_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="uid_location" visibleBindingValue="topic">
                <Label>Enter array index for unique ID component in topic.  0 is first component.</Label>
            </Field>
            
            <Field id="uid_location_payload_key" type="textfield" defaultValue=""  visibleBindingId="uid_location" visibleBindingValue="payload">
                <Label>Payload Key:</Label>
            </Field>
            <Field id="uid_location_payload_key_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="uid_location" visibleBindingValue="payload" alwaysUseInDialogHeightCalc="true">
                <Label>Enter key for dict entry for unique ID field.  If nested entry, enter each key with '.' between.  For example, "states.did" if the "did" key is inside the "states" dict.</Label>
            </Field>
                        
            <Field id="address" type="textfield"  defaultValue="">
                <Label>Unique ID Value:</Label>
            </Field>
            <Field id="address_note" type="label" fontSize="small" fontColor="darkgray" >
                <Label>Unique ID value for the MQTT device.</Label>
            </Field>

            <Field id="devices_separator1" type="separator"/>

            <Field id="state_location" type="menu" defaultValue="payload">
        		<Label>State Value Location:</Label>
        		<List>
        			<Option value="topic">Topic Component</Option>
        			<Option value="payload">Payload Fields</Option>
        		</List>
        	</Field>
            <Field id="state_location_topic_field" type="textfield" defaultValue="0"  visibleBindingId="state_location" visibleBindingValue="topic">
                <Label>Topic Field:</Label>
            </Field>
            <Field id="state_location_topic_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="state_location" visibleBindingValue="topic">
                <Label>Enter array index for state component in topic.  0 is first component.</Label>
            </Field>
            <Field id="state_location_payload_type" type="menu" defaultValue="json" visibleBindingId="state_location" visibleBindingValue="payload">
        		<Label>Payload Type:</Label>
        		<List>
        			<Option value="json">JSON</Option>
        			<Option value="raw">Raw</Option>
        		</List>
        	</Field>
        	
            <Field id="state_location_payload_key" type="textfield" defaultValue=""  visibleBindingId="state_location_payload_type" visibleBindingValue="json">
                <Label>Payload Key:</Label>
            </Field>
            <Field id="state_location_payload_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="state_location_payload_type" visibleBindingValue="json" alwaysUseInDialogHeightCalc="true">
                <Label>Enter key for dict entry for state field.  If nested entry, enter each key with '.' between.  For example, "states.value" if the "value" key is inside the "states" dict.</Label>
            </Field>

            <Field id="value_location_payload_key" type="textfield" defaultValue=""  visibleBindingId="state_location_payload_type" visibleBindingValue="json">
                <Label>Value (Brightness) Key:</Label>
            </Field>
            <Field id="value_location_payload_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="state_location_payload_type" visibleBindingValue="json" alwaysUseInDialogHeightCalc="true">
                <Label>Enter key for dict entry for brightness field.  If nested entry, enter each key with '.' between.  For example, "states.value" if the "value" key is inside the "states" dict.</Label>
            </Field>

            <Field id="devices_separator2" type="separator"/>

            <Field id="action_template" type="textfield" defaultValue="">
                <Label>On/Off Action Topic:
                </Label>
            </Field>
            <Field id="on_action_payload" type="textfield" defaultValue="on">
                <Label>On Action Payload:
                </Label>
            </Field>
            <Field id="off_action_payload" type="textfield" defaultValue="off">
                <Label>Off Action Payload:
                </Label>
            </Field>
            <Field id="dimmer_action_template" type="textfield" defaultValue="">
                <Label>Dimmer Action Topic:
                </Label>
            </Field>
            <Field id="dimmer_action_payload" type="textfield" defaultValue="{'turn': 'on', 'brightness': {{brightness}} }">
                <Label>Dimmer Action Payload:
                </Label>
            </Field>
            <Field id="brightness_scale" type="menu" defaultValue="100">
        		<Label>Device Brightness Scale:</Label>
        		<List>  
        			<Option value="100">0-100</Option>
        			<Option value="255">0-255</Option>
        		</List>
        	</Field>
            <Field id="SupportsStatusRequest" type="checkbox" defaultValue="false">
                <Label>Device supports status requests:</Label>
            </Field>        	
            <Field id="status_action_template" type="textfield" defaultValue=""  visibleBindingId="SupportsStatusRequest" visibleBindingValue="true">
                <Label>Status Request Topic:</Label>
            </Field>
            <Field id="status_action_payload" type="textfield" defaultValue=""  visibleBindingId="SupportsStatusRequest" visibleBindingValue="true">
                <Label>Status Request Payload:</Label>
            </Field>
            <Field id="devices_separator3" type="separator"/>
            <Field id="state_dict_payload_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="state_location_payload_type" visibleBindingValue="json">
                <Label>If the payload has a dict with multiple entries that should all be states of the device, enter the key(s) for that dict.  If top level, enter '.'.  If nested entry, enter each key with '.' between.</Label>
            </Field>
            <Field id="state_dict_payload_key" type="textfield" defaultValue=""  visibleBindingId="state_location_payload_type" visibleBindingValue="json">
                <Label>Multi-States Key:</Label>
            </Field>           
            <Field id="devices_separator4" type="separator"/>
            <Field id="SupportsBatteryLevel" type="checkbox" defaultValue="false">
                <Label>Device reports battery status:</Label>
            </Field>        	
            <Field id="battery_payload_key" type="textfield" defaultValue=""  visibleBindingId="SupportsBatteryLevel" visibleBindingValue="true">
                <Label>Battery Payload Key:</Label>
            </Field>
            <Field id="SupportsEnergyMeter" type="checkbox" defaultValue="false">
                <Label>Device reports energy usage:</Label>
            </Field>
            <Field id="energy_payload_key" type="textfield" defaultValue=""  visibleBindingId="SupportsEnergyMeter" visibleBindingValue="true">
                <Label>Energy Payload Key:</Label>
            </Field>
            <Field id="SupportsEnergyMeterCurPower" type="checkbox" defaultValue="false">
                <Label>Device reports power load:</Label>
            </Field>
            <Field id="power_payload_key" type="textfield" defaultValue=""  visibleBindingId="SupportsEnergyMeterCurPower" visibleBindingValue="true">
                <Label>Power Payload Key:</Label>
            </Field>
            <Field id="extras_payload_key_note" type="label" fontSize="small" fontColor="darkgray" alwaysUseInDialogHeightCalc="true">
                <Label>Payload Keys - If nested entry, enter each key with '.' between.  For example, "states.value" if the "value" key is inside the "states" dict.</Label>
            </Field>

       </ConfigUI>
    </Device>

    <Device id="shimColor" type="dimmer">
        <Name>MQTT Color Device</Name>
        <ConfigUI>
            <SupportURL>http://forums.indigodomo.com/viewforum.php?f=214</SupportURL>
			<Field id="SupportsOnState" type="checkbox" defaultValue="false" hidden="true" />
			<Field id="SupportsSensorValue" type="checkbox" defaultValue="false" hidden="true" />
			<Field type="checkbox" id="SupportsColor" defaultValue="true" hidden="true" />  <!-- Also set in deviceStartComm() -->
			<Field type="checkbox" id="SupportsWhite" defaultValue="true" hidden="true" />
			
            <Field id="states_list" type="list" hidden="true"><List class="self" method="getStateList"/></Field>

            <Field id="connection_section" type="label">
                <Label>Broker Connection Information</Label>
            </Field>
            <Field id="brokerID" type="menu">
                <Label>MQTT Broker:</Label>
                <List class="self" filter="" method="getBrokerDevices" dynamicReload="true"/>
            </Field>

            <Field id="message_type" type="textfield">
                <Label>Message Type:</Label>
            </Field>
            <Field id="message_type_note" type="label" fontSize="small" fontColor="darkgray" >
                <Label>Must match the Message Type field in the MQTT Plugin's Action.</Label>
            </Field>

            <Field id="uid_location" type="menu" defaultValue="topic">
        		<Label>Unique ID Location:</Label>
        		<List>  
        			<Option value="topic">Topic Component</Option>
        			<Option value="payload">Payload Field</Option>
        		</List>
        	</Field>

            <Field id="uid_location_topic_field" type="textfield" defaultValue="0"  visibleBindingId="uid_location" visibleBindingValue="topic">
                <Label>Topic Field:</Label>
            </Field>
            <Field id="uid_location_topic_field_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="uid_location" visibleBindingValue="topic">
                <Label>Enter array index for unique ID component in topic.  0 is first component.</Label>
            </Field>
            
            <Field id="uid_location_payload_key" type="textfield" defaultValue=""  visibleBindingId="uid_location" visibleBindingValue="payload">
                <Label>Payload Key:</Label>
            </Field>
            <Field id="uid_location_payload_key_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="uid_location" visibleBindingValue="payload" alwaysUseInDialogHeightCalc="true">
                <Label>Enter key for dict entry for unique ID field.  If nested entry, enter each key with '.' between.  For example, "states.did" if the "did" key is inside the "states" dict.</Label>
            </Field>
                        
            <Field id="address" type="textfield"  defaultValue="">
                <Label>Unique ID Value:</Label>
            </Field>
            <Field id="address_note" type="label" fontSize="small" fontColor="darkgray" >
                <Label>Unique ID value for the MQTT device.</Label>
            </Field>

            <Field id="devices_separator0" type="separator"/>
            
            <Field id="state_location" type="menu" defaultValue="payload">
        		<Label>State Value Location:</Label>
        		<List>
        			<Option value="topic">Topic Component</Option>
        			<Option value="payload">Payload Fields</Option>
        		</List>
        	</Field>
            <Field id="state_location_topic_field" type="textfield" defaultValue="0"  visibleBindingId="state_location" visibleBindingValue="topic">
                <Label>Topic Field:</Label>
            </Field>
            <Field id="state_location_topic_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="state_location" visibleBindingValue="topic">
                <Label>Enter array index for state component in topic.  0 is first component.</Label>
            </Field>
            <Field id="state_location_payload_type" type="menu" defaultValue="json" visibleBindingId="state_location" visibleBindingValue="payload">
        		<Label>Payload Type:</Label>
        		<List>
        			<Option value="json">JSON</Option>
        			<Option value="raw">Raw</Option>
        		</List>
        	</Field>
        	
            <Field id="state_location_payload_key" type="textfield" defaultValue=""  visibleBindingId="state_location_payload_type" visibleBindingValue="json">
                <Label>Payload Key:</Label>
            </Field>
            <Field id="state_location_payload_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="state_location_payload_type" visibleBindingValue="json" alwaysUseInDialogHeightCalc="true">
                <Label>Enter key for dict entry for state field.  If nested entry, enter each key with '.' between.  For example, "states.value" if the "value" key is inside the "states" dict.</Label>
            </Field>

            <Field id="value_location_payload_key" type="textfield" defaultValue=""  visibleBindingId="state_location_payload_type" visibleBindingValue="json">
                <Label>Value (Brightness) Key:</Label>
            </Field>
            <Field id="value_location_payload_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="state_location_payload_type" visibleBindingValue="json" alwaysUseInDialogHeightCalc="true">
                <Label>Enter key for dict entry for brightness field.  If nested entry, enter each key with '.' between.  For example, "states.value" if the "value" key is inside the "states" dict.</Label>
            </Field>

            <Field id="color_value_payload_key" type="textfield" defaultValue=""  visibleBindingId="state_location_payload_type" visibleBindingValue="json">
                <Label>Color Value Key:</Label>
            </Field>
            <Field id="color_value_payload_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="state_location_payload_type" visibleBindingValue="json" alwaysUseInDialogHeightCalc="true">
                <Label>Enter key for dict entry for color value field.  If nested entry, enter each key with '.' between.  For example, "states.value" if the "value" key is inside the "states" dict.</Label>
            </Field>

            <Field id="color_temp_payload_key" type="textfield" defaultValue=""  visibleBindingId="state_location_payload_type" visibleBindingValue="json">
                <Label>Color Temperature Key:</Label>
            </Field>
            <Field id="color_temp_payload_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="state_location_payload_type" visibleBindingValue="json" alwaysUseInDialogHeightCalc="true">
                <Label>Enter key for dict entry for color temperature field.  If nested entry, enter each key with '.' between.  For example, "states.value" if the "value" key is inside the "states" dict.</Label>
            </Field>

            <Field id="devices_separator2" type="separator"/>

            <Field id="action_template" type="textfield" defaultValue="">
                <Label>On/Off Action Topic:
                </Label>
            </Field>
            <Field id="on_action_payload" type="textfield" defaultValue="on">
                <Label>On Action Payload:
                </Label>
            </Field>
            <Field id="off_action_payload" type="textfield" defaultValue="off">
                <Label>Off Action Payload:
                </Label>
            </Field>
            <Field id="dimmer_action_template" type="textfield" defaultValue="">
                <Label>Dimmer Action Topic:
                </Label>
            </Field>
            <Field id="dimmer_action_payload" type="textfield" defaultValue="{'turn': 'on', 'brightness': {{brightness}} }">
                <Label>Dimmer Action Payload:
                </Label>
            </Field>
            <Field id="brightness_scale" type="menu" defaultValue="100">
        		<Label>Device Brightness Scale:</Label>
        		<List>  
        			<Option value="100">0-100</Option>
        			<Option value="255">0-255</Option>
        		</List>
        	</Field>
			<Field type="checkbox" id="SupportsRGB" defaultValue="true">
				<Label>Supports RGB:</Label>
			</Field>		
            <Field id="set_rgb_topic" type="textfield" defaultValue=""  visibleBindingId="SupportsRGB" visibleBindingValue="true">
                <Label>Set RGB Topic:</Label>
            </Field>
            <Field id="set_rgb_template" type="textfield" defaultValue=""  visibleBindingId="SupportsRGB" visibleBindingValue="true">
                <Label>Set RGB Payload:</Label>
            </Field>
            <Field id="color_space" type="menu" defaultValue="Indigo" visibleBindingId="SupportsRGB" visibleBindingValue="true">
        		<Label>Device Color Space:</Label>
        		<List>  
        			<Option value="Indigo">Indigo (RGB 0-100)</Option>
        			<Option value="HueA">Hue A (CIE1931 Gamut A)</Option>
        			<Option value="HueB">Hue B (CIE1931 Gamut B)</Option>
        			<Option value="HueC">Hue C (CIE1931 Gamut C)</Option>
        		</List>
        	</Field>

			<Field type="checkbox" id="SupportsWhiteTemperature" defaultValue="false">
				<Label>Supports White Temp:</Label>
			</Field>
            <Field id="set_temp_topic" type="textfield" defaultValue=""  visibleBindingId="SupportsWhiteTemperature" visibleBindingValue="true">
                <Label>Set Color Temp Topic:</Label>
            </Field>
            <Field id="set_temp_template" type="textfield" defaultValue=""  visibleBindingId="SupportsWhiteTemperature" visibleBindingValue="true">
                <Label>Set Color Temp Template:</Label>
            </Field>
            <Field id="color_temp_scale" type="menu" defaultValue="Kelvin" visibleBindingId="SupportsWhiteTemperature" visibleBindingValue="true">
        		<Label>Device Color Temperature:</Label>
        		<List>  
        			<Option value="Kelvin">Degrees Kelvin</Option>
        			<Option value="Mirek">Mirek (Reciprocal MegaKelvin)</Option>
        		</List>
        	</Field>

            <Field id="devices_separator1" type="separator"/>
            <Field id="SupportsStatusRequest" type="checkbox" defaultValue="false">
                <Label>Device supports status requests:</Label>
            </Field>        	
            <Field id="status_action_template" type="textfield" defaultValue=""  visibleBindingId="SupportsStatusRequest" visibleBindingValue="true">
                <Label>Status Request Topic:</Label>
            </Field>
            <Field id="status_action_payload" type="textfield" defaultValue=""  visibleBindingId="SupportsStatusRequest" visibleBindingValue="true">
                <Label>Status Request Payload:</Label>
            </Field>
            <Field id="devices_separator3" type="separator"/>
            <Field id="state_dict_payload_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="state_location_payload_type" visibleBindingValue="json">
                <Label>If the payload has a dict with multiple entries that should all be states of the device, enter the key(s) for that dict.  If top level, enter '.'.  If nested entry, enter each key with '.' between.</Label>
            </Field>
            <Field id="state_dict_payload_key" type="textfield" defaultValue=""  visibleBindingId="state_location_payload_type" visibleBindingValue="json">
                <Label>Multi-States Key:</Label>
            </Field>           
            <Field id="devices_separator4" type="separator"/>
            <Field id="SupportsBatteryLevel" type="checkbox" defaultValue="false">
                <Label>Device reports battery status:</Label>
            </Field>        	
            <Field id="battery_payload_key" type="textfield" defaultValue=""  visibleBindingId="SupportsBatteryLevel" visibleBindingValue="true">
                <Label>Battery Payload Key:</Label>
            </Field>
            <Field id="SupportsEnergyMeter" type="checkbox" defaultValue="false">
                <Label>Device reports energy usage:</Label>
            </Field>
            <Field id="energy_payload_key" type="textfield" defaultValue=""  visibleBindingId="SupportsEnergyMeter" visibleBindingValue="true">
                <Label>Energy Payload Key:</Label>
            </Field>
            <Field id="SupportsEnergyMeterCurPower" type="checkbox" defaultValue="false">
                <Label>Device reports power load:</Label>
            </Field>
            <Field id="power_payload_key" type="textfield" defaultValue=""  visibleBindingId="SupportsEnergyMeterCurPower" visibleBindingValue="true">
                <Label>Power Payload Key:</Label>
            </Field>
            <Field id="extras_payload_key_note" type="label" fontSize="small" fontColor="darkgray" alwaysUseInDialogHeightCalc="true">
                <Label>Payload Keys - If nested entry, enter each key with '.' between.  For example, "states.value" if the "value" key is inside the "states" dict.</Label>
            </Field>

       </ConfigUI>
    </Device>

    <Device id="shimOnOffSensor" type="sensor">
        <Name>MQTT On/Off Sensor Device</Name>
        <ConfigUI>
            <SupportURL>http://forums.indigodomo.com/viewforum.php?f=214</SupportURL>
			<Field id="SupportsOnState" type="checkbox" defaultValue="true" hidden="true" />
			<Field id="SupportsSensorValue" type="checkbox" defaultValue="false" hidden="true" />
            <Field id="states_list" type="list" hidden="true"><List class="self" method="getStateList"/></Field>
			
            <Field id="brokerID" type="menu">
                <Label>MQTT Broker:</Label>
                <List class="self" filter="" method="getBrokerDevices" dynamicReload="true"/>
            </Field>

            <Field id="message_type" type="textfield">
                <Label>Message Type:</Label>
            </Field>
            <Field id="message_type_note" type="label" fontSize="small" fontColor="darkgray" >
                <Label>Must match the Message Type field in the MQTT Plugin's Action.</Label>
            </Field>

            <Field id="uid_location" type="menu" defaultValue="topic">
        		<Label>Unique ID Location:</Label>
        		<List>  
        			<Option value="topic">Topic Component</Option>
        			<Option value="payload">Payload Field</Option>
        		</List>
        	</Field>

            <Field id="uid_location_topic_field" type="textfield" defaultValue="0"  visibleBindingId="uid_location" visibleBindingValue="topic">
                <Label>Topic Field:</Label>
            </Field>
            <Field id="uid_location_topic_field_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="uid_location" visibleBindingValue="topic">
                <Label>Enter array index for unique ID component in topic.  0 is first component.</Label>
            </Field>
            
            <Field id="uid_location_payload_key" type="textfield" defaultValue=""  visibleBindingId="uid_location" visibleBindingValue="payload">
                <Label>Payload Key:</Label>
            </Field>
            <Field id="uid_location_payload_key_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="uid_location" visibleBindingValue="payload" alwaysUseInDialogHeightCalc="true">
                <Label>Enter key for dict entry for unique ID field.  If nested entry, enter each key with '.' between.  For example, "states.did" if the "did" key is inside the "states" dict.</Label>
            </Field>
                        
            <Field id="address" type="textfield"  defaultValue="">
                <Label>Unique ID Value:</Label>
            </Field>
            <Field id="address_note" type="label" fontSize="small" fontColor="darkgray" >
                <Label>Unique ID value for the MQTT device.</Label>
            </Field>

            <Field id="devices_separator1" type="separator"/>

            <Field id="state_location" type="menu" defaultValue="payload">
        		<Label>State Value Location:</Label>
        		<List>
        			<Option value="topic">Topic Component</Option>
        			<Option value="payload">Payload Fields</Option>
        		</List>
        	</Field>
            <Field id="state_location_topic_field" type="textfield" defaultValue="0"  visibleBindingId="state_location" visibleBindingValue="topic">
                <Label>Topic Field:</Label>
            </Field>
            <Field id="state_location_topic_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="state_location" visibleBindingValue="topic">
                <Label>Enter array index for state component in topic.  0 is first component.</Label>
            </Field>
            <Field id="state_location_payload_type" type="menu" defaultValue="json" visibleBindingId="state_location" visibleBindingValue="payload">
        		<Label>Payload Type:</Label>
        		<List>
        			<Option value="json">JSON</Option>
        			<Option value="raw">Raw</Option>
        		</List>
        	</Field>
        	
            <Field id="state_location_payload_key" type="textfield" defaultValue=""  visibleBindingId="state_location_payload_type" visibleBindingValue="json">
                <Label>Payload Key:</Label>
            </Field>
            <Field id="state_location_payload_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="state_location_payload_type" visibleBindingValue="json" alwaysUseInDialogHeightCalc="true">
                <Label>Enter key for dict entry for state field.  If nested entry, enter each key with '.' between.  For example, "states.value" if the "value" key is inside the "states" dict.</Label>
            </Field>

            <Field id="state_on_value" type="textfield" defaultValue="" alwaysUseInDialogHeightCalc="true">
                <Label>On Value:</Label>
            </Field>
            <Field id="state_on_value_note" type="label" fontSize="small" fontColor="darkgray" alwaysUseInDialogHeightCalc="true">
                <Label>String to match for sensor to be "on".  If the sensor reports a JSON boolean value, leave this blank. </Label>
            </Field>

    		<Field id="shimSensorSubtype" type="menu" defaultValue="Generic">
				<Label>Sensor Type:</Label>
                <List>
                    <Option value="Generic">Generic</Option>
                    <Option value="Power">Power On/Off</Option>
                    <Option value="MotionSensor">Motion Sensor</Option>
                </List>
			</Field>
            <Field id="devices_separator2" type="separator"/>
            <Field id="state_dict_payload_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="state_location_payload_type" visibleBindingValue="json">
                <Label>If the payload has a dict with multiple entries that should all be states of the device, enter the key(s) for that dict.  If top level, enter '.'.  If nested entry, enter each key with '.' between.</Label>
            </Field>
            <Field id="state_dict_payload_key" type="textfield" defaultValue=""  visibleBindingId="state_location_payload_type" visibleBindingValue="json">
                <Label>Multi-States Key:</Label>
            </Field>
            <Field id="devices_separator4" type="separator"/>
            <Field id="SupportsStatusRequest" type="checkbox" defaultValue="false">
                <Label>Device supports status requests:</Label>
            </Field>        	
            <Field id="status_action_template" type="textfield" defaultValue=""  visibleBindingId="SupportsStatusRequest" visibleBindingValue="true">
                <Label>Status Request Topic:</Label>
            </Field>
            <Field id="status_action_payload" type="textfield" defaultValue=""  visibleBindingId="SupportsStatusRequest" visibleBindingValue="true">
                <Label>Status Request Payload:</Label>
            </Field>
            <Field id="SupportsBatteryLevel" type="checkbox" defaultValue="false">
                <Label>Device reports battery status:</Label>
            </Field>        	
            <Field id="battery_payload_key" type="textfield" defaultValue=""  visibleBindingId="SupportsBatteryLevel" visibleBindingValue="true">
                <Label>Battery Payload Key:</Label>
            </Field>
            <Field id="SupportsEnergyMeter" type="checkbox" defaultValue="false">
                <Label>Device reports energy usage:</Label>
            </Field>
            <Field id="energy_payload_key" type="textfield" defaultValue=""  visibleBindingId="SupportsEnergyMeter" visibleBindingValue="true">
                <Label>Energy Payload Key:</Label>
            </Field>
            <Field id="SupportsEnergyMeterCurPower" type="checkbox" defaultValue="false">
                <Label>Device reports power load:</Label>
            </Field>
            <Field id="power_payload_key" type="textfield" defaultValue=""  visibleBindingId="SupportsEnergyMeterCurPower" visibleBindingValue="true">
                <Label>Power Payload Key:</Label>
            </Field>
            <Field id="extras_payload_key_note" type="label" fontSize="small" fontColor="darkgray" alwaysUseInDialogHeightCalc="true">
                <Label>Payload Keys - If nested entry, enter each key with '.' between.  For example, "states.value" if the "value" key is inside the "states" dict.</Label>
            </Field>
       </ConfigUI>
    </Device>
    
    <Device id="shimValueSensor"  type="sensor">
        <Name>MQTT Value Sensor Device</Name>
        <ConfigUI>
            <SupportURL>http://forums.indigodomo.com/viewforum.php?f=214</SupportURL>
			<Field id="SupportsOnState" type="checkbox" defaultValue="false" hidden="true" />
			<Field id="SupportsSensorValue" type="checkbox" defaultValue="true" hidden="true" />
            <Field id="states_list" type="list" hidden="true"><List class="self" method="getStateList"/></Field>
			
            <Field id="brokerID" type="menu">
                <Label>MQTT Broker:</Label>
                <List class="self" filter="" method="getBrokerDevices" dynamicReload="true"/>
            </Field>

            <Field id="message_type" type="textfield">
                <Label>Message Type:</Label>
            </Field>
            <Field id="message_type_note" type="label" fontSize="small" fontColor="darkgray" >
                <Label>Must match the Message Type field in the MQTT Plugin's Action.</Label>
            </Field>

            <Field id="uid_location" type="menu" defaultValue="topic">
        		<Label>Unique ID Location:</Label>
        		<List>  
        			<Option value="topic">Topic Component</Option>
        			<Option value="payload">Payload Field</Option>
        		</List>
        	</Field>

            <Field id="uid_location_topic_field" type="textfield" defaultValue="0"  visibleBindingId="uid_location" visibleBindingValue="topic">
                <Label>Topic Field:</Label>
            </Field>
            <Field id="uid_location_topic_field_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="uid_location" visibleBindingValue="topic">
                <Label>Enter array index for unique ID component in topic.  0 is first component.</Label>
            </Field>
            
            <Field id="uid_location_payload_key" type="textfield" defaultValue=""  visibleBindingId="uid_location" visibleBindingValue="payload">
                <Label>Payload Key:</Label>
            </Field>
            <Field id="uid_location_payload_key_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="uid_location" visibleBindingValue="payload" alwaysUseInDialogHeightCalc="true">
                <Label>Enter key for dict entry for unique ID field.  If nested entry, enter each key with '.' between.  For example, "states.did" if the "did" key is inside the "states" dict.</Label>
            </Field>
                        
            <Field id="address" type="textfield"  defaultValue="">
                <Label>Unique ID Value:</Label>
            </Field>
            <Field id="address_note" type="label" fontSize="small" fontColor="darkgray" >
                <Label>Unique ID value for the MQTT device.</Label>
            </Field>

            <Field id="devices_separator1" type="separator"/>

            <Field id="state_location" type="menu" defaultValue="payload">
        		<Label>State Value Location:</Label>
        		<List>
        			<Option value="topic">Topic Component</Option>
        			<Option value="payload">Payload Fields</Option>
        		</List>
        	</Field>
            <Field id="state_location_topic_field" type="textfield" defaultValue="0"  visibleBindingId="state_location" visibleBindingValue="topic">
                <Label>Topic Field:</Label>
            </Field>
            <Field id="state_location_topic_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="state_location" visibleBindingValue="topic">
                <Label>Enter array index for state component in topic.  0 is first component.</Label>
            </Field>
            <Field id="state_location_payload_type" type="menu" defaultValue="json" visibleBindingId="state_location" visibleBindingValue="payload">
        		<Label>Payload Type:</Label>
        		<List>
        			<Option value="json">JSON</Option>
        			<Option value="raw">Raw</Option>
        		</List>
        	</Field>
        	
            <Field id="state_location_payload_key" type="textfield" defaultValue=""  visibleBindingId="state_location_payload_type" visibleBindingValue="json">
                <Label>Payload Key:</Label>
            </Field>
            <Field id="state_location_payload_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="state_location_payload_type" visibleBindingValue="json" alwaysUseInDialogHeightCalc="true">
                <Label>Enter key for dict entry for state field.  If nested entry, enter each key with '.' between.  For example, "states.value" if the "value" key is inside the "states" dict.</Label>
            </Field>

			<Field id="shimSensorSubtype" type="menu" defaultValue="Generic">
				<Label>Sensor Type:</Label>
                <List>
                    <Option value="Generic">Generic</Option>
                    <Option value="Temperature-F">Temperature (F)</Option>
                    <Option value="Temperature-C">Temperature (C)</Option>
                    <Option value="Humidity">Humidity</Option>
                    <Option value="Pressure-inHg">Pressure (inHg)</Option>
                    <Option value="Pressure-mb">Pressure (mb)</Option>
                    <Option value="Power-W">Power (W)</Option>
                    <Option value="Voltage">Voltage (V)</Option>
                    <Option value="Current">Current (A)</Option>
                    <Option value="Luminance">Luminance (lux)</Option>
                    <Option value="Luminance%">Luminance (%)</Option>
                    <Option value="ppm">Concentration (ppm)</Option>
                </List>
			</Field>
            <Field id="shimSensorPrecision" type="textfield" defaultValue="2">
                <Label>Precision:</Label>
            </Field>
            <Field id="adjustmentFunction" type="textfield" defaultValue="">
                <Label>Adjustment Function:
                </Label>
            </Field>
            <Field id="adjustmentFunction_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="state_location_payload_type" visibleBindingValue="json">
                <Label>Enter function in terms of 'x' to adjust state value. For example, '(x * 9.0/5.0) + 32.0' to convert from degrees C to F.</Label>
            </Field>
            <Field id="devices_separator2" type="separator"/>
            <Field id="state_dict_payload_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="state_location_payload_type" visibleBindingValue="json">
                <Label>If the payload has a dict with multiple entries that should all be states of the device, enter the key(s) for that dict.  If top level, enter '.'.  If nested entry, enter each key with '.' between.</Label>
            </Field>
            <Field id="state_dict_payload_key" type="textfield" defaultValue=""  visibleBindingId="state_location_payload_type" visibleBindingValue="json">
                <Label>Multi-States Key:</Label>
            </Field>
            <Field id="devices_separator4" type="separator"/>
            <Field id="SupportsStatusRequest" type="checkbox" defaultValue="false">
                <Label>Device supports status requests:</Label>
            </Field>        	
            <Field id="status_action_template" type="textfield" defaultValue=""  visibleBindingId="SupportsStatusRequest" visibleBindingValue="true">
                <Label>Status Request Topic:</Label>
            </Field>
            <Field id="status_action_payload" type="textfield" defaultValue=""  visibleBindingId="SupportsStatusRequest" visibleBindingValue="true">
                <Label>Status Request Payload:</Label>
            </Field>
            <Field id="SupportsBatteryLevel" type="checkbox" defaultValue="false">
                <Label>Device reports battery level:</Label>
            </Field>        	
            <Field id="battery_payload_key" type="textfield" defaultValue=""  visibleBindingId="SupportsBatteryLevel" visibleBindingValue="true">
                <Label>Battery Payload Key:</Label>
            </Field>
            <Field id="SupportsEnergyMeter" type="checkbox" defaultValue="false">
                <Label>Device reports energy usage:</Label>
            </Field>
            <Field id="energy_payload_key" type="textfield" defaultValue=""  visibleBindingId="SupportsEnergyMeter" visibleBindingValue="true">
                <Label>Energy Payload Key:</Label>
            </Field>
            <Field id="SupportsEnergyMeterCurPower" type="checkbox" defaultValue="false">
                <Label>Device reports power load:</Label>
            </Field>
            <Field id="power_payload_key" type="textfield" defaultValue=""  visibleBindingId="SupportsEnergyMeterCurPower" visibleBindingValue="true">
                <Label>Power Payload Key:</Label>
            </Field>
            <Field id="extras_payload_key_note" type="label" fontSize="small" fontColor="darkgray" alwaysUseInDialogHeightCalc="true">
                <Label>Payload Keys - If nested entry, enter each key with '.' between.  For example, "states.value" if the "value" key is inside the "states" dict.</Label>
            </Field>
       </ConfigUI>
    </Device>
    
    <Device id="shimGeneric"  type="custom">
        <Name>MQTT Generic JSON Device</Name>
        <ConfigUI>
            <SupportURL>http://forums.indigodomo.com/viewforum.php?f=214</SupportURL>
			<Field id="SupportsOnState" type="checkbox" defaultValue="false" hidden="true" />
			<Field id="SupportsSensorValue" type="checkbox" defaultValue="false" hidden="true" />
            <Field id="states_list" type="list" hidden="true"><List class="self" method="getStateList"/></Field>
            <Field id="state_location" type="textfield" defaultValue="payload" hidden="true" />
            <Field id="state_location_payload_type" type="textfield" defaultValue="json" hidden="true" />
			
            <Field id="brokerID" type="menu">
                <Label>MQTT Broker:</Label>
                <List class="self" filter="" method="getBrokerDevices" dynamicReload="true"/>
            </Field>

            <Field id="message_type" type="textfield">
                <Label>Message Type:</Label>
            </Field>
            <Field id="message_type_note" type="label" fontSize="small" fontColor="darkgray" >
                <Label>Must match the Message Type field in the MQTT Plugin's Action.</Label>
            </Field>

            <Field id="uid_location" type="menu" defaultValue="topic">
        		<Label>Unique ID Location:</Label>
        		<List>  
        			<Option value="topic">Topic Component</Option>
        			<Option value="payload">Payload Field</Option>
        		</List>
        	</Field>

            <Field id="uid_location_topic_field" type="textfield" defaultValue="0"  visibleBindingId="uid_location" visibleBindingValue="topic">
                <Label>Topic Field:</Label>
            </Field>
            <Field id="uid_location_topic_field_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="uid_location" visibleBindingValue="topic">
                <Label>Enter array index for unique ID component in topic.  0 is first component.</Label>
            </Field>
            
            <Field id="uid_location_payload_key" type="textfield" defaultValue=""  visibleBindingId="uid_location" visibleBindingValue="payload">
                <Label>Payload Key:</Label>
            </Field>
            <Field id="uid_location_payload_key_note" type="label" fontSize="small" fontColor="darkgray" visibleBindingId="uid_location" visibleBindingValue="payload" alwaysUseInDialogHeightCalc="true">
                <Label>Enter key for dict entry for unique ID field.  If nested entry, enter each key with '.' between.  For example, "states.did" if the "did" key is inside the "states" dict.</Label>
            </Field>
                        
            <Field id="address" type="textfield"  defaultValue="">
                <Label>Unique ID Value:</Label>
            </Field>
            <Field id="address_note" type="label" fontSize="small" fontColor="darkgray" >
                <Label>Unique ID value for the MQTT device.</Label>
            </Field>

            <Field id="devices_separator1" type="separator"/>
            <Field id="state_dict_payload_key" type="textfield" defaultValue="">
                <Label>Multi-States Key:</Label>
            </Field>
            <Field id="state_dict_payload_note" type="label" fontSize="small" fontColor="darkgray">
                <Label>Enter the key(s) for the dict containing the device states.  If top level, enter '.'.  If nested entry, enter each key with '.' between.</Label>
            </Field>
            <Field id="devices_separator4" type="separator"/>
            <Field id="SupportsStatusRequest" type="checkbox" defaultValue="false">
                <Label>Device supports status requests:</Label>
            </Field>        	
            <Field id="status_action_template" type="textfield" defaultValue=""  visibleBindingId="SupportsStatusRequest" visibleBindingValue="true">
                <Label>Status Request Topic:</Label>
            </Field>
            <Field id="status_action_payload" type="textfield" defaultValue=""  visibleBindingId="SupportsStatusRequest" visibleBindingValue="true">
                <Label>Status Request Payload:</Label>
            </Field>
            <Field id="SupportsBatteryLevel" type="checkbox" defaultValue="false">
                <Label>Device reports battery status:</Label>
            </Field>        	
            <Field id="battery_payload_key" type="textfield" defaultValue=""  visibleBindingId="SupportsBatteryLevel" visibleBindingValue="true">
                <Label>Battery Payload Key:</Label>
            </Field>
            <Field id="SupportsEnergyMeter" type="checkbox" defaultValue="false">
                <Label>Device reports energy usage:</Label>
            </Field>
            <Field id="energy_payload_key" type="textfield" defaultValue=""  visibleBindingId="SupportsEnergyMeter" visibleBindingValue="true">
                <Label>Energy Payload Key:</Label>
            </Field>
            <Field id="SupportsEnergyMeterCurPower" type="checkbox" defaultValue="false">
                <Label>Device reports power load:</Label>
            </Field>
            <Field id="power_payload_key" type="textfield" defaultValue=""  visibleBindingId="SupportsEnergyMeterCurPower" visibleBindingValue="true">
                <Label>Power Payload Key:</Label>
            </Field>
            <Field id="extras_payload_key_note" type="label" fontSize="small" fontColor="darkgray" alwaysUseInDialogHeightCalc="true">
                <Label>Payload Keys - If nested entry, enter each key with '.' between.  For example, "states.value" if the "value" key is inside the "states" dict.</Label>
            </Field>
       </ConfigUI>
    </Device>
    
</Devices>
